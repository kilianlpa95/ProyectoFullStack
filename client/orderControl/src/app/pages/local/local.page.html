<ion-header>
  <ion-toolbar>
    <ion-title>local</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content>
  <form [formGroup]="localForm" (ngSubmit)="addTask(localForm.value)">
    <ion-item>
      <ion-label position="floating">To do</ion-label>
      <ion-input type="text" formControlName="identifier"></ion-input>
    </ion-item>
    <div class="validation-errors">
      <ng-container *ngFor="let validation of validationMessages.identifier">
        <div class="error-message"
          *ngIf="localForm.get('identifier').hasError(validation.type) && (localForm.get('identifier').dirty || localForm.get('identifier').touched)">
          <ion-icon name="information-circle-outline"></ion-icon> {{ validation.message }}
        </div>
      </ng-container>
    </div>
    <ion-item>
      <ion-label position="floating">Manager</ion-label>
      <ion-input type="text" formControlName="manager"></ion-input>
    </ion-item>
    <div class="validation-errors">
      <ng-container *ngFor="let validation of validationMessages.manager">
        <div class="error-message"
          *ngIf="localForm.get('manager').hasError(validation.type) && (localForm.get('manager').dirty || localForm.get('manager').touched)">
          <ion-icon name="information-circle-outline"></ion-icon> {{ validation.message }}
        </div>
      </ng-container>
    </div>
    <ion-item>
      <ion-label position="floating">Description</ion-label>
      <ion-input type="text" formControlName="description"></ion-input>
    </ion-item>
    <div class="validation-errors">
      <ng-container *ngFor="let validation of validationMessages.description">
        <div class="error-message"
          *ngIf="localForm.get('description').hasError(validation.type) && (localForm.get('description').dirty || localForm.get('description').touched)">
          <ion-icon name="information-circle-outline"></ion-icon> {{ validation.message }}
        </div>
      </ng-container>
    </div>
    <ion-button type="submit" [color]="buttonColor" expand="block" fill="outline" [disabled]="!localForm.valid">Confirm</ion-button>
  </form>
  <!--ion-item>
    <ion-label position="fixed">To do</ion-label>
    <ion-input [(ngModel)]="newTask.identifier"></ion-input>
  </!--ion-item>
  <ion-item>
    <ion-label position="fixed">Name</ion-label>
    <ion-input [(ngModel)]="newTask.name"></ion-input>
  </ion-item>
  <ion-item>
    <ion-label position="fixed">Description</ion-label>
    <ion-input [(ngModel)]="newTask.description"></ion-input>
  </ion-item>

  <ion-button expand="full" (click)="addTask()">Create</ion-button-->

  <ion-list #myList>
    <ion-list-header>
      <ion-label>List</ion-label>
    </ion-list-header>
    <ion-item-sliding *ngFor="let task of tasks">
      <ion-item>
        <ion-label class="ion-text-wrap" (click)="putTask(task)">
          <h2>{{ task.identifier }}</h2>
          <ion-text color="dark">
            <p>
              Manager: {{ task.manager }}
            </p>
            <p>
              Description: {{ task.description }}
            </p>
          </ion-text> 
        </ion-label>
      </ion-item>

      <ion-item-options side="end">
          <ion-item-option color="tertiary" (click)="updateTask(task, localForm.value)">Update</ion-item-option>
          <ion-item-option color="danger" (click)="deleteTask(task)">Delete</ion-item-option>
      </ion-item-options>
    </ion-item-sliding>
  </ion-list>
</ion-content>
